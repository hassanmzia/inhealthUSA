{% extends 'healthcare/base.html' %}
{% block title %}New Social History - InHealth EHR{% endblock %}
{% block breadcrumbs %}&rsaquo; <a href="{% url 'social_history_list' %}">Social History</a> &rsaquo; New Record{% endblock %}
{% block content %}
{% include 'healthcare/includes/form_styles.html' %}

<div class="form-container">
    <div class="form-header">
        <div><h1>New Social History Record</h1><div class="meta">Document a patient's social history</div></div>
        <div><a href="{% url 'social_history_list' %}" class="button-secondary">Back to Social History</a></div>
    </div>

    <div class="module form-module">
        <h2>Social History Information</h2>
        <div class="form-content">
            <form method="POST">
                {% csrf_token %}
                <div class="form-row">
                    <div class="form-field"><label class="required">Patient</label>
                        <select name="patient_id" required><option value="">Select a patient...</option>{% for patient in patients %}<option value="{{ patient.patient_id }}">{{ patient.full_name }} (ID: {{ patient.patient_id }})</option>{% endfor %}</select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field"><label>Smoking Status</label>
                        <select name="smoking_status"><option value="">Select status...</option><option value="Never">Never</option><option value="Former">Former</option><option value="Current">Current</option></select>
                    </div>
                    <div class="form-field"><label>Marital Status</label>
                        <select name="marital_status"><option value="">Select status...</option><option value="Single">Single</option><option value="Married">Married</option><option value="Divorced">Divorced</option><option value="Widowed">Widowed</option></select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field"><label>Alcohol Use</label><input type="text" name="alcohol_use" placeholder="e.g., Occasional, Social"></div>
                    <div class="form-field"><label>Drug Use</label><input type="text" name="drug_use" placeholder="e.g., None, Recreational"></div>
                </div>
                <div class="form-row">
                    <div class="form-field full-width"><label>Occupation</label><input type="text" name="occupation" placeholder="e.g., Teacher, Engineer"></div>
                </div>
                <div class="form-row">
                    <div class="form-field full-width"><label>Notes</label><textarea name="notes" rows="3" placeholder="Additional notes or details..."></textarea></div>
                </div>
                <div class="submit-row">
                    <div class="buttons-right"><a href="{% url 'social_history_list' %}" class="button-secondary">Cancel</a><button type="submit" class="button-primary">Create Record</button></div>
                </div>
            </form>
        </div>
    </div>
</div>

<p style="margin-top: 20px; font-size: 12px; color: #666;"><strong>Note:</strong> You can also use the <a href="/admin/healthcare/socialhistory/add/">Django Admin Panel</a> to create social history records.</p>
{% endblock %}
