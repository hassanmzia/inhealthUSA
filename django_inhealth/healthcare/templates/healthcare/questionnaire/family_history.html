{% extends 'healthcare/base.html' %}
{% block title %}Family History Questionnaire - InHealth EHR{% endblock %}
{% block breadcrumbs %}&rsaquo; Family History Questionnaire{% endblock %}
{% block content %}

{% include 'healthcare/includes/form_styles.html' %}

<style>
    .questionnaire-container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .questionnaire-header {
        background: white;
        border: 1px solid var(--hairline-color);
        border-radius: 4px;
        padding: 30px;
        margin-bottom: 30px;
        text-align: center;
    }

    .questionnaire-header h1 {
        margin: 0 0 10px 0;
        font-size: 32px;
        font-weight: 300;
        color: var(--primary);
    }

    .questionnaire-header .subtitle {
        font-size: 14px;
        color: #666;
        margin-bottom: 20px;
    }

    .progress-bar {
        background: #e9ecef;
        height: 8px;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 20px;
    }

    .progress-fill {
        background: var(--primary);
        height: 100%;
        width: 0%;
        transition: width 0.3s ease;
    }

    .section-card {
        background: white;
        border: 1px solid var(--hairline-color);
        border-radius: 4px;
        margin-bottom: 20px;
        overflow: hidden;
    }

    .section-header {
        background: var(--primary);
        color: var(--header-link-color);
        padding: 15px 20px;
        font-size: 18px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .section-number {
        background: rgba(255,255,255,0.2);
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
    }

    .section-content {
        padding: 25px;
    }

    .family-member-card {
        background: #f8f9fa;
        border: 1px solid var(--hairline-color);
        border-radius: 4px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .family-member-card h3 {
        margin: 0 0 15px 0;
        padding: 0 0 10px 0;
        border-bottom: 2px solid var(--primary);
        color: var(--primary);
        font-size: 16px;
        font-weight: 600;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-label {
        font-size: 14px;
        font-weight: 600;
        color: var(--body-fg);
        margin-bottom: 8px;
        display: block;
    }

    .checkbox-group {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 10px;
        margin-top: 10px;
    }

    .checkbox-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px;
        border-radius: 4px;
        transition: background 0.2s;
    }

    .checkbox-item:hover {
        background: white;
    }

    .checkbox-item input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
    }

    .checkbox-item label {
        cursor: pointer;
        font-size: 13px;
        margin: 0;
    }

    .radio-group {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
    }

    .radio-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .radio-item input[type="radio"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
    }

    .radio-item label {
        cursor: pointer;
        font-size: 13px;
        margin: 0;
    }

    .text-input,
    .textarea-input,
    .select-input,
    .number-input,
    .date-input {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 14px;
        font-family: inherit;
    }

    .text-input:focus,
    .textarea-input:focus,
    .select-input:focus,
    .number-input:focus,
    .date-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(65, 118, 144, 0.1);
    }

    .textarea-input {
        resize: vertical;
        min-height: 100px;
    }

    .input-hint {
        font-size: 12px;
        color: #666;
        margin-top: 5px;
        font-style: italic;
    }

    .conditions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 15px;
        margin-top: 15px;
    }

    .condition-item {
        background: white;
        border: 1px solid var(--hairline-color);
        border-radius: 4px;
        padding: 12px;
    }

    .condition-item label {
        display: block;
        font-weight: 600;
        margin-bottom: 8px;
        color: var(--primary);
    }

    .age-input {
        width: 100%;
        padding: 8px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 13px;
    }

    .submit-section {
        background: white;
        border: 1px solid var(--hairline-color);
        border-radius: 4px;
        padding: 25px;
        text-align: center;
        margin-top: 30px;
    }

    .submit-button {
        background: var(--primary);
        color: white;
        border: none;
        padding: 15px 50px;
        font-size: 16px;
        font-weight: 600;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .submit-button:hover {
        background: #35606f;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .required-mark {
        color: #dc3545;
        margin-left: 3px;
    }

    .add-more-button {
        background: #6c757d;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        margin-top: 10px;
    }

    .add-more-button:hover {
        background: #5a6268;
    }

    .hereditary-conditions {
        background: #fff3cd;
        border: 2px solid #ffc107;
        border-radius: 4px;
        padding: 20px;
        margin: 20px 0;
    }

    .hereditary-conditions h4 {
        margin: 0 0 15px 0;
        color: #856404;
        font-size: 16px;
    }
</style>

<div class="questionnaire-container">
    <div class="questionnaire-header">
        <h1>Comprehensive Family History Questionnaire</h1>
        <p class="subtitle">Please provide detailed information about your family's medical history. This helps identify hereditary health risks and guide preventive care.</p>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
    </div>

    <form method="POST" id="questionnaire-form">
        {% csrf_token %}

        <!-- Section 1: Patient Information -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">1</div>
                <div>Patient Information</div>
            </div>
            <div class="section-content">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Full Name <span class="required-mark">*</span></label>
                        <input type="text" name="patient_name" class="text-input" required placeholder="First Middle Last">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date of Birth <span class="required-mark">*</span></label>
                        <input type="date" name="patient_dob" class="date-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Today's Date <span class="required-mark">*</span></label>
                        <input type="date" name="questionnaire_date" class="date-input" required>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 2: Father's Information -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">2</div>
                <div>Father's Medical History</div>
            </div>
            <div class="section-content">
                <div class="family-member-card">
                    <h3>Father</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" name="father_name" class="text-input" placeholder="Father's full name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Living Status</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" name="father_status" value="living" id="father-living">
                                    <label for="father-living">Living</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="father_status" value="deceased" id="father-deceased">
                                    <label for="father-deceased">Deceased</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Current Age / Age at Death</label>
                            <input type="number" name="father_age" class="number-input" min="0" max="150" placeholder="Age">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">If deceased, cause of death</label>
                        <input type="text" name="father_cause_of_death" class="text-input" placeholder="Cause of death">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Medical Conditions (Check all that apply)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="heart_disease" id="father-heart">
                                <label for="father-heart">Heart Disease</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="high_blood_pressure" id="father-bp">
                                <label for="father-bp">High Blood Pressure</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="diabetes" id="father-diabetes">
                                <label for="father-diabetes">Diabetes</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="stroke" id="father-stroke">
                                <label for="father-stroke">Stroke</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="cancer" id="father-cancer">
                                <label for="father-cancer">Cancer</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="kidney_disease" id="father-kidney">
                                <label for="father-kidney">Kidney Disease</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="liver_disease" id="father-liver">
                                <label for="father-liver">Liver Disease</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="mental_illness" id="father-mental">
                                <label for="father-mental">Mental Illness</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="alzheimers" id="father-alzheimers">
                                <label for="father-alzheimers">Alzheimer's/Dementia</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="asthma" id="father-asthma">
                                <label for="father-asthma">Asthma/COPD</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="blood_clots" id="father-clots">
                                <label for="father-clots">Blood Clots</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="father_conditions" value="substance_abuse" id="father-substance">
                                <label for="father-substance">Substance Abuse</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">If cancer, specify type(s)</label>
                        <input type="text" name="father_cancer_type" class="text-input" placeholder="Type of cancer and age at diagnosis">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Additional medical information</label>
                        <textarea name="father_notes" class="textarea-input" placeholder="Any other medical conditions, surgeries, or relevant information"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 3: Mother's Information -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">3</div>
                <div>Mother's Medical History</div>
            </div>
            <div class="section-content">
                <div class="family-member-card">
                    <h3>Mother</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" name="mother_name" class="text-input" placeholder="Mother's full name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Living Status</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" name="mother_status" value="living" id="mother-living">
                                    <label for="mother-living">Living</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="mother_status" value="deceased" id="mother-deceased">
                                    <label for="mother-deceased">Deceased</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Current Age / Age at Death</label>
                            <input type="number" name="mother_age" class="number-input" min="0" max="150" placeholder="Age">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">If deceased, cause of death</label>
                        <input type="text" name="mother_cause_of_death" class="text-input" placeholder="Cause of death">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Medical Conditions (Check all that apply)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="heart_disease" id="mother-heart">
                                <label for="mother-heart">Heart Disease</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="high_blood_pressure" id="mother-bp">
                                <label for="mother-bp">High Blood Pressure</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="diabetes" id="mother-diabetes">
                                <label for="mother-diabetes">Diabetes</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="stroke" id="mother-stroke">
                                <label for="mother-stroke">Stroke</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="cancer" id="mother-cancer">
                                <label for="mother-cancer">Cancer</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="breast_cancer" id="mother-breast">
                                <label for="mother-breast">Breast Cancer</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="ovarian_cancer" id="mother-ovarian">
                                <label for="mother-ovarian">Ovarian Cancer</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="kidney_disease" id="mother-kidney">
                                <label for="mother-kidney">Kidney Disease</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="liver_disease" id="mother-liver">
                                <label for="mother-liver">Liver Disease</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="mental_illness" id="mother-mental">
                                <label for="mother-mental">Mental Illness</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="alzheimers" id="mother-alzheimers">
                                <label for="mother-alzheimers">Alzheimer's/Dementia</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="osteoporosis" id="mother-osteo">
                                <label for="mother-osteo">Osteoporosis</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="thyroid_disease" id="mother-thyroid">
                                <label for="mother-thyroid">Thyroid Disease</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="mother_conditions" value="blood_clots" id="mother-clots">
                                <label for="mother-clots">Blood Clots</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">If cancer, specify type(s)</label>
                        <input type="text" name="mother_cancer_type" class="text-input" placeholder="Type of cancer and age at diagnosis">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Additional medical information</label>
                        <textarea name="mother_notes" class="textarea-input" placeholder="Any other medical conditions, surgeries, or relevant information"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 4: Paternal Grandparents -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">4</div>
                <div>Paternal Grandparents (Father's Parents)</div>
            </div>
            <div class="section-content">
                <!-- Paternal Grandfather -->
                <div class="family-member-card">
                    <h3>Paternal Grandfather</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Living Status</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" name="paternal_grandfather_status" value="living" id="pgf-living">
                                    <label for="pgf-living">Living</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="paternal_grandfather_status" value="deceased" id="pgf-deceased">
                                    <label for="pgf-deceased">Deceased</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="paternal_grandfather_status" value="unknown" id="pgf-unknown">
                                    <label for="pgf-unknown">Unknown</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Age / Age at Death</label>
                            <input type="number" name="paternal_grandfather_age" class="number-input" min="0" max="150">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Cause of Death</label>
                            <input type="text" name="paternal_grandfather_death" class="text-input">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Medical Conditions</label>
                        <textarea name="paternal_grandfather_conditions" class="textarea-input" rows="3" placeholder="List any known medical conditions"></textarea>
                    </div>
                </div>

                <!-- Paternal Grandmother -->
                <div class="family-member-card">
                    <h3>Paternal Grandmother</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Living Status</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" name="paternal_grandmother_status" value="living" id="pgm-living">
                                    <label for="pgm-living">Living</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="paternal_grandmother_status" value="deceased" id="pgm-deceased">
                                    <label for="pgm-deceased">Deceased</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="paternal_grandmother_status" value="unknown" id="pgm-unknown">
                                    <label for="pgm-unknown">Unknown</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Age / Age at Death</label>
                            <input type="number" name="paternal_grandmother_age" class="number-input" min="0" max="150">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Cause of Death</label>
                            <input type="text" name="paternal_grandmother_death" class="text-input">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Medical Conditions</label>
                        <textarea name="paternal_grandmother_conditions" class="textarea-input" rows="3" placeholder="List any known medical conditions"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 5: Maternal Grandparents -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">5</div>
                <div>Maternal Grandparents (Mother's Parents)</div>
            </div>
            <div class="section-content">
                <!-- Maternal Grandfather -->
                <div class="family-member-card">
                    <h3>Maternal Grandfather</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Living Status</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" name="maternal_grandfather_status" value="living" id="mgf-living">
                                    <label for="mgf-living">Living</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="maternal_grandfather_status" value="deceased" id="mgf-deceased">
                                    <label for="mgf-deceased">Deceased</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="maternal_grandfather_status" value="unknown" id="mgf-unknown">
                                    <label for="mgf-unknown">Unknown</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Age / Age at Death</label>
                            <input type="number" name="maternal_grandfather_age" class="number-input" min="0" max="150">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Cause of Death</label>
                            <input type="text" name="maternal_grandfather_death" class="text-input">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Medical Conditions</label>
                        <textarea name="maternal_grandfather_conditions" class="textarea-input" rows="3" placeholder="List any known medical conditions"></textarea>
                    </div>
                </div>

                <!-- Maternal Grandmother -->
                <div class="family-member-card">
                    <h3>Maternal Grandmother</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Living Status</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" name="maternal_grandmother_status" value="living" id="mgm-living">
                                    <label for="mgm-living">Living</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="maternal_grandmother_status" value="deceased" id="mgm-deceased">
                                    <label for="mgm-deceased">Deceased</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" name="maternal_grandmother_status" value="unknown" id="mgm-unknown">
                                    <label for="mgm-unknown">Unknown</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Age / Age at Death</label>
                            <input type="number" name="maternal_grandmother_age" class="number-input" min="0" max="150">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Cause of Death</label>
                            <input type="text" name="maternal_grandmother_death" class="text-input">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Medical Conditions</label>
                        <textarea name="maternal_grandmother_conditions" class="textarea-input" rows="3" placeholder="List any known medical conditions"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 6: Siblings -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">6</div>
                <div>Siblings (Brothers and Sisters)</div>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label class="form-label">Number of Brothers</label>
                    <input type="number" name="num_brothers" class="number-input" min="0" max="20" value="0">
                </div>

                <div class="form-group">
                    <label class="form-label">Number of Sisters</label>
                    <input type="number" name="num_sisters" class="number-input" min="0" max="20" value="0">
                </div>

                <div id="siblings-container">
                    <!-- Sibling 1 -->
                    <div class="family-member-card">
                        <h3>Sibling #1</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Gender</label>
                                <select name="sibling_1_gender" class="select-input">
                                    <option value="">Select...</option>
                                    <option value="brother">Brother</option>
                                    <option value="sister">Sister</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Living Status</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <input type="radio" name="sibling_1_status" value="living" id="sib1-living">
                                        <label for="sib1-living">Living</label>
                                    </div>
                                    <div class="radio-item">
                                        <input type="radio" name="sibling_1_status" value="deceased" id="sib1-deceased">
                                        <label for="sib1-deceased">Deceased</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Age / Age at Death</label>
                                <input type="number" name="sibling_1_age" class="number-input" min="0" max="150">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Medical Conditions</label>
                            <textarea name="sibling_1_conditions" class="textarea-input" rows="2" placeholder="List any medical conditions"></textarea>
                        </div>
                    </div>

                    <!-- Sibling 2 -->
                    <div class="family-member-card">
                        <h3>Sibling #2</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Gender</label>
                                <select name="sibling_2_gender" class="select-input">
                                    <option value="">Select...</option>
                                    <option value="brother">Brother</option>
                                    <option value="sister">Sister</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Living Status</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <input type="radio" name="sibling_2_status" value="living" id="sib2-living">
                                        <label for="sib2-living">Living</label>
                                    </div>
                                    <div class="radio-item">
                                        <input type="radio" name="sibling_2_status" value="deceased" id="sib2-deceased">
                                        <label for="sib2-deceased">Deceased</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Age / Age at Death</label>
                                <input type="number" name="sibling_2_age" class="number-input" min="0" max="150">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Medical Conditions</label>
                            <textarea name="sibling_2_conditions" class="textarea-input" rows="2" placeholder="List any medical conditions"></textarea>
                        </div>
                    </div>

                    <!-- Sibling 3 -->
                    <div class="family-member-card">
                        <h3>Sibling #3</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Gender</label>
                                <select name="sibling_3_gender" class="select-input">
                                    <option value="">Select...</option>
                                    <option value="brother">Brother</option>
                                    <option value="sister">Sister</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Living Status</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <input type="radio" name="sibling_3_status" value="living" id="sib3-living">
                                        <label for="sib3-living">Living</label>
                                    </div>
                                    <div class="radio-item">
                                        <input type="radio" name="sibling_3_status" value="deceased" id="sib3-deceased">
                                        <label for="sib3-deceased">Deceased</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Age / Age at Death</label>
                                <input type="number" name="sibling_3_age" class="number-input" min="0" max="150">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Medical Conditions</label>
                            <textarea name="sibling_3_conditions" class="textarea-input" rows="2" placeholder="List any medical conditions"></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Additional Siblings Information</label>
                    <textarea name="siblings_additional" class="textarea-input" rows="3" placeholder="If you have more than 3 siblings, please list their information here"></textarea>
                </div>
            </div>
        </div>

        <!-- Section 7: Children -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">7</div>
                <div>Children</div>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label class="form-label">Number of Children</label>
                    <input type="number" name="num_children" class="number-input" min="0" max="20" value="0">
                </div>

                <div id="children-container">
                    <!-- Child 1 -->
                    <div class="family-member-card">
                        <h3>Child #1</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Gender</label>
                                <select name="child_1_gender" class="select-input">
                                    <option value="">Select...</option>
                                    <option value="son">Son</option>
                                    <option value="daughter">Daughter</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Age</label>
                                <input type="number" name="child_1_age" class="number-input" min="0" max="100">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Health Status</label>
                                <select name="child_1_health" class="select-input">
                                    <option value="">Select...</option>
                                    <option value="healthy">Healthy</option>
                                    <option value="has_conditions">Has Medical Conditions</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Medical Conditions (if any)</label>
                            <textarea name="child_1_conditions" class="textarea-input" rows="2" placeholder="List any medical conditions"></textarea>
                        </div>
                    </div>

                    <!-- Child 2 -->
                    <div class="family-member-card">
                        <h3>Child #2</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Gender</label>
                                <select name="child_2_gender" class="select-input">
                                    <option value="">Select...</option>
                                    <option value="son">Son</option>
                                    <option value="daughter">Daughter</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Age</label>
                                <input type="number" name="child_2_age" class="number-input" min="0" max="100">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Health Status</label>
                                <select name="child_2_health" class="select-input">
                                    <option value="">Select...</option>
                                    <option value="healthy">Healthy</option>
                                    <option value="has_conditions">Has Medical Conditions</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Medical Conditions (if any)</label>
                            <textarea name="child_2_conditions" class="textarea-input" rows="2" placeholder="List any medical conditions"></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Additional Children Information</label>
                    <textarea name="children_additional" class="textarea-input" rows="3" placeholder="If you have more than 2 children, please list their information here"></textarea>
                </div>
            </div>
        </div>

        <!-- Section 8: Aunts and Uncles -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">8</div>
                <div>Aunts and Uncles</div>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label class="form-label">Father's Siblings (Paternal Aunts & Uncles)</label>
                    <textarea name="paternal_aunts_uncles" class="textarea-input" rows="4" placeholder="List any significant medical conditions among your father's siblings (your paternal aunts and uncles). Include relationship, condition, and age at diagnosis if known."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Mother's Siblings (Maternal Aunts & Uncles)</label>
                    <textarea name="maternal_aunts_uncles" class="textarea-input" rows="4" placeholder="List any significant medical conditions among your mother's siblings (your maternal aunts and uncles). Include relationship, condition, and age at diagnosis if known."></textarea>
                </div>
            </div>
        </div>

        <!-- Section 9: Hereditary Conditions Summary -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">9</div>
                <div>Hereditary Conditions Summary</div>
            </div>
            <div class="section-content">
                <div class="hereditary-conditions">
                    <h4>⚠️ High-Risk Hereditary Conditions</h4>
                    <p style="margin: 0 0 15px 0; color: #856404; font-size: 13px;">Check if any blood relatives have been diagnosed with these conditions:</p>

                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="early_heart_disease" id="hered-heart">
                            <label for="hered-heart">Early Heart Disease (before age 55 in men, 65 in women)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="breast_cancer" id="hered-breast">
                            <label for="hered-breast">Breast Cancer (especially under age 50)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="ovarian_cancer" id="hered-ovarian">
                            <label for="hered-ovarian">Ovarian Cancer</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="colon_cancer" id="hered-colon">
                            <label for="hered-colon">Colon Cancer (especially under age 50)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="prostate_cancer" id="hered-prostate">
                            <label for="hered-prostate">Prostate Cancer (especially under age 60)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="melanoma" id="hered-melanoma">
                            <label for="hered-melanoma">Melanoma</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="type1_diabetes" id="hered-diabetes1">
                            <label for="hered-diabetes1">Type 1 Diabetes</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="type2_diabetes" id="hered-diabetes2">
                            <label for="hered-diabetes2">Type 2 Diabetes (multiple relatives)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="sickle_cell" id="hered-sickle">
                            <label for="hered-sickle">Sickle Cell Disease</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="hemophilia" id="hered-hemo">
                            <label for="hered-hemo">Hemophilia</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="cystic_fibrosis" id="hered-cf">
                            <label for="hered-cf">Cystic Fibrosis</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="huntingtons" id="hered-huntingtons">
                            <label for="hered-huntingtons">Huntington's Disease</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="muscular_dystrophy" id="hered-md">
                            <label for="hered-md">Muscular Dystrophy</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="polycystic_kidney" id="hered-kidney">
                            <label for="hered-kidney">Polycystic Kidney Disease</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="alzheimers_early" id="hered-alzheimers">
                            <label for="hered-alzheimers">Early-Onset Alzheimer's (before age 65)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="hereditary_conditions" value="mental_illness" id="hered-mental">
                            <label for="hered-mental">Severe Mental Illness (multiple relatives)</label>
                        </div>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label class="form-label">If any hereditary conditions are present, please provide details</label>
                    <textarea name="hereditary_details" class="textarea-input" rows="5" placeholder="For each condition checked above, please specify: which relative(s), their age at diagnosis, and any other relevant information"></textarea>
                </div>
            </div>
        </div>

        <!-- Section 10: Genetic Testing and Counseling -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">10</div>
                <div>Genetic Testing and Counseling</div>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label class="form-label">Have you or any family members undergone genetic testing?</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="genetic_testing" value="yes" id="genetic-yes">
                            <label for="genetic-yes">Yes</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="genetic_testing" value="no" id="genetic-no">
                            <label for="genetic-no">No</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="genetic_testing" value="unknown" id="genetic-unknown">
                            <label for="genetic-unknown">Unknown</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">If yes, please provide details about genetic testing</label>
                    <textarea name="genetic_testing_details" class="textarea-input" rows="4" placeholder="Include who was tested, what genes/conditions were tested for, and the results if known (e.g., BRCA1/2, Lynch syndrome, etc.)"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Have you or any family members received genetic counseling?</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="genetic_counseling" value="yes" id="counseling-yes">
                            <label for="counseling-yes">Yes</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="genetic_counseling" value="no" id="counseling-no">
                            <label for="counseling-no">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Are you interested in genetic counseling or testing?</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="interested_genetic" value="yes" id="interested-yes">
                            <label for="interested-yes">Yes</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="interested_genetic" value="no" id="interested-no">
                            <label for="interested-no">No</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="interested_genetic" value="maybe" id="interested-maybe">
                            <label for="interested-maybe">Maybe/Need More Information</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 11: Ethnic Background -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">11</div>
                <div>Ethnic Background</div>
            </div>
            <div class="section-content">
                <p style="margin-bottom: 15px; color: #666; font-size: 13px;">Certain genetic conditions are more common in specific ethnic groups. This information helps assess your risk.</p>

                <div class="form-group">
                    <label class="form-label">Your Ethnic Background (Check all that apply)</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="african" id="eth-african">
                            <label for="eth-african">African American/African</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="ashkenazi" id="eth-ashkenazi">
                            <label for="eth-ashkenazi">Ashkenazi Jewish</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="asian" id="eth-asian">
                            <label for="eth-asian">Asian</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="caucasian" id="eth-caucasian">
                            <label for="eth-caucasian">Caucasian/White</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="hispanic" id="eth-hispanic">
                            <label for="eth-hispanic">Hispanic/Latino</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="mediterranean" id="eth-med">
                            <label for="eth-med">Mediterranean</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="middle_eastern" id="eth-me">
                            <label for="eth-me">Middle Eastern</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="native_american" id="eth-native">
                            <label for="eth-native">Native American</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="pacific_islander" id="eth-pacific">
                            <label for="eth-pacific">Pacific Islander</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="ethnicity" value="other" id="eth-other">
                            <label for="eth-other">Other</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Additional ethnic background information</label>
                    <textarea name="ethnicity_details" class="textarea-input" rows="3" placeholder="Please specify country/region of origin if relevant"></textarea>
                </div>
            </div>
        </div>

        <!-- Section 12: Additional Information -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-number">12</div>
                <div>Additional Family Health Information</div>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label class="form-label">Are there any patterns of disease in your family?</label>
                    <textarea name="disease_patterns" class="textarea-input" rows="4" placeholder="For example: multiple family members with the same type of cancer, several relatives with heart disease at young ages, etc."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Are there any rare or unusual conditions in your family?</label>
                    <textarea name="rare_conditions" class="textarea-input" rows="4" placeholder="Any conditions that are uncommon or that doctors have mentioned are significant"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Is there any history of consanguinity (blood relatives marrying)?</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="consanguinity" value="yes" id="consang-yes">
                            <label for="consang-yes">Yes</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="consanguinity" value="no" id="consang-no">
                            <label for="consang-no">No</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="consanguinity" value="unknown" id="consang-unknown">
                            <label for="consang-unknown">Unknown</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Are you adopted?</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="adopted" value="yes" id="adopted-yes">
                            <label for="adopted-yes">Yes</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="adopted" value="no" id="adopted-no">
                            <label for="adopted-no">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">If adopted, what information do you have about your biological family's health?</label>
                    <textarea name="adopted_bio_info" class="textarea-input" rows="4" placeholder="Any information you have about biological parents or family medical history"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Any additional information you would like to share about your family's health history?</label>
                    <textarea name="additional_info" class="textarea-input" rows="5" placeholder="Any other relevant family health information not covered above"></textarea>
                </div>
            </div>
        </div>

        <!-- Submit Section -->
        <div class="submit-section">
            <p style="margin-bottom: 20px; color: #666;">
                By submitting this form, I certify that the information provided about my family's medical history is accurate and complete to the best of my knowledge.
            </p>
            <button type="submit" class="submit-button">Submit Family History Questionnaire</button>
        </div>
    </form>
</div>

<script>
    // Progress tracking
    const form = document.getElementById('questionnaire-form');
    const progressFill = document.getElementById('progress-fill');

    function updateProgress() {
        const inputs = form.querySelectorAll('input:not([type="checkbox"]):not([type="radio"]), textarea, select');
        let filled = 0;
        let total = 0;

        inputs.forEach(input => {
            total++;
            if (input.value.trim() !== '') {
                filled++;
            }
        });

        // Count radio and checkbox groups
        const radioGroups = new Set();
        const checkboxGroups = new Set();

        form.querySelectorAll('input[type="radio"]').forEach(radio => {
            radioGroups.add(radio.name);
        });

        form.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkboxGroups.add(checkbox.name);
        });

        // Check which radio groups have a selection
        radioGroups.forEach(groupName => {
            total++;
            const selected = form.querySelector(`input[name="${groupName}"]:checked`);
            if (selected) filled++;
        });

        const percentage = total > 0 ? (filled / total) * 100 : 0;
        progressFill.style.width = percentage + '%';
    }

    // Update progress on any input change
    form.addEventListener('change', updateProgress);
    form.addEventListener('input', updateProgress);

    // Initial progress
    updateProgress();
</script>

{% endblock %}
