{% extends 'healthcare/base.html' %}

{% block title %}Dashboard - InHealth EHR{% endblock %}

{% block breadcrumbs %}
&rsaquo; Dashboard
{% endblock %}

{% block content %}
<h1>Dashboard</h1>

<div class="dashboard">
    <!-- Quick Stats -->
    <div class="module">
        <table style="width: 100%;">
            <caption>Quick Statistics</caption>
            <tbody>
                <tr>
                    <th style="width: 25%; text-align: center; padding: 20px; border-right: 1px solid var(--hairline-color);">
                        <div style="font-size: 36px; font-weight: bold; color: var(--primary);">{{ total_hospitals }}</div>
                        <div style="font-size: 13px; color: #666;">Hospitals</div>
                    </th>
                    <th style="width: 25%; text-align: center; padding: 20px; border-right: 1px solid var(--hairline-color);">
                        <div style="font-size: 36px; font-weight: bold; color: var(--primary);">{{ total_providers }}</div>
                        <div style="font-size: 13px; color: #666;">Doctors</div>
                    </th>
                    <th style="width: 25%; text-align: center; padding: 20px; border-right: 1px solid var(--hairline-color);">
                        <div style="font-size: 36px; font-weight: bold; color: var(--primary);">{{ total_patients }}</div>
                        <div style="font-size: 13px; color: #666;">Patients</div>
                    </th>
                    <th style="width: 25%; text-align: center; padding: 20px;">
                        <div style="font-size: 36px; font-weight: bold; color: var(--primary);">{{ total_appointments_today }}</div>
                        <div style="font-size: 13px; color: #666;">Appointments Today</div>
                    </th>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Role-Specific Dashboard Links -->

    <!-- Patient Profile Link (for Patients) -->
    {% if user.profile.is_patient %}
    <div class="module" style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); padding: 20px; margin-bottom: 20px;">
        <a href="{% url 'patient_profile' %}" style="display: block; text-align: center; color: white; text-decoration: none;">
            <div style="font-size: 48px; margin-bottom: 10px;">ğŸ‘¤</div>
            <h2 style="color: white; margin: 0; font-size: 24px;">My Patient Profile</h2>
            <p style="color: rgba(255,255,255,0.9); margin: 10px 0 0 0;">View your medical records, appointments, prescriptions, and billing information</p>
        </a>
    </div>
    {% endif %}

    <!-- Doctor/Provider Profile Link (for Doctors) -->
    {% if user.profile.is_doctor %}
    <div class="module" style="background: linear-gradient(135deg, #00897B 0%, #00695C 100%); padding: 20px; margin-bottom: 20px;">
        <a href="{% url 'provider_profile' %}" style="display: block; text-align: center; color: white; text-decoration: none;">
            <div style="font-size: 48px; margin-bottom: 10px;">ğŸ‘¨â€âš•ï¸</div>
            <h2 style="color: white; margin: 0; font-size: 24px;">My Provider Profile</h2>
            <p style="color: rgba(255,255,255,0.9); margin: 10px 0 0 0;">View your schedule, patients, appointments, and professional information</p>
        </a>
    </div>
    {% endif %}

    <!-- Admin Dashboard Link (for Office Administrators) -->
    {% if user.profile.is_office_admin %}
    <div class="module" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; margin-bottom: 20px;">
        <a href="{% url 'admin_dashboard' %}" style="display: block; text-align: center; color: white; text-decoration: none;">
            <div style="font-size: 48px; margin-bottom: 10px;">âš™ï¸</div>
            <h2 style="color: white; margin: 0; font-size: 24px;">Office Administrator Dashboard</h2>
            <p style="color: rgba(255,255,255,0.9); margin: 10px 0 0 0;">Manage providers, patients, hospitals, appointments, billing, and payments</p>
        </a>
    </div>
    {% endif %}

    <!-- Nurse Dashboard Link (for Nurses) -->
    {% if user.profile.is_nurse %}
    <div class="module" style="background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%); padding: 20px; margin-bottom: 20px;">
        <a href="{% url 'nurse_dashboard' %}" style="display: block; text-align: center; color: white; text-decoration: none;">
            <div style="font-size: 48px; margin-bottom: 10px;">ğŸ©º</div>
            <h2 style="color: white; margin: 0; font-size: 24px;">Nurse Dashboard</h2>
            <p style="color: rgba(255,255,255,0.9); margin: 10px 0 0 0;">View patients, manage vital signs, and track appointments</p>
        </a>
    </div>
    {% endif %}

    <!-- Quick Links -->
    <div class="module">
        <h2>Quick Access</h2>
        <ul style="padding: 0; margin: 0;">
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'hospital_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ¥</div>
                    <div>Hospitals</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'physician_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ‘¨â€âš•ï¸</div>
                    <div>Doctors</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'patient_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ‘¥</div>
                    <div>Patients</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'appointment_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ“…</div>
                    <div>Appointments</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'prescription_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ’Š</div>
                    <div>Prescriptions</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'medical_history_questionnaire' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ“‹</div>
                    <div>Medical Questionnaire</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'family_history_questionnaire' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                    <div>Family History Questionnaire</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'social_history_questionnaire' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ¡</div>
                    <div>Social History Questionnaire</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'allergies_questionnaire' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ¤§</div>
                    <div>Allergies Questionnaire</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'insurance_information' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ’³</div>
                    <div>Insurance Information</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'billing_information' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ’°</div>
                    <div>Billing Information</div>
                </a>
            </li>
            <li style="display: inline-block; width: 32%; margin: 0; border: none;">
                <a href="{% url 'payment_history' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">ğŸ“Š</div>
                    <div>Payment History</div>
                </a>
            </li>
        </ul>
    </div>

    <!-- Recent Appointments -->
    <div class="module">
        <table>
            <caption><a href="{% url 'appointment_list' %}">Recent Appointments</a></caption>
            <thead>
                <tr>
                    <th>Date & Time</th>
                    <th>Patient</th>
                    <th>Physician</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for appointment in recent_appointments %}
                <tr>
                    <td>{{ appointment.encounter_date|date:"Y-m-d H:i" }}</td>
                    <td>
                        <a href="{% url 'patient_detail' appointment.patient.patient_id %}">
                            {{ appointment.patient.full_name }}
                        </a>
                    </td>
                    <td>
                        {% if appointment.provider %}
                            Dr. {{ appointment.provider.full_name }}
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                    <td>{{ appointment.encounter_type }}</td>
                    <td>
                        <span class="status-badge status-{{ appointment.status|lower|cut:' ' }}">
                            {{ appointment.status }}
                        </span>
                    </td>
                    <td>
                        <a href="{% url 'appointment_detail' appointment.encounter_id %}">View</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="text-align: center; color: #666;">
                        No recent appointments found.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
