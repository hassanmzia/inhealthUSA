{% extends 'healthcare/base.html' %}

{% block title %}Dashboard - InHealth EHR{% endblock %}

{% block breadcrumbs %}
&rsaquo; Dashboard
{% endblock %}

{% block content %}
<h1>Dashboard</h1>

<div class="dashboard">
    <!-- Quick Stats -->
    <div class="module">
        <table style="width: 100%;">
            <caption>Quick Statistics</caption>
            <tbody>
                <tr>
                    <th style="width: 25%; text-align: center; padding: 20px; border-right: 1px solid var(--hairline-color);">
                        <div style="font-size: 36px; font-weight: bold; color: var(--primary);">{{ total_hospitals }}</div>
                        <div style="font-size: 13px; color: #666;">Hospitals</div>
                    </th>
                    <th style="width: 25%; text-align: center; padding: 20px; border-right: 1px solid var(--hairline-color);">
                        <div style="font-size: 36px; font-weight: bold; color: var(--primary);">{{ total_providers }}</div>
                        <div style="font-size: 13px; color: #666;">Doctors</div>
                    </th>
                    <th style="width: 25%; text-align: center; padding: 20px; border-right: 1px solid var(--hairline-color);">
                        <div style="font-size: 36px; font-weight: bold; color: var(--primary);">{{ total_patients }}</div>
                        <div style="font-size: 13px; color: #666;">Patients</div>
                    </th>
                    <th style="width: 25%; text-align: center; padding: 20px;">
                        <div style="font-size: 36px; font-weight: bold; color: var(--primary);">{{ total_appointments_today }}</div>
                        <div style="font-size: 13px; color: #666;">Appointments Today</div>
                    </th>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Quick Links -->
    <div class="module">
        <h2>Quick Access</h2>
        <ul style="padding: 0; margin: 0;">
            <li style="display: inline-block; width: 19%; margin: 0; border: none;">
                <a href="{% url 'hospital_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">üè•</div>
                    <div>Hospitals</div>
                </a>
            </li>
            <li style="display: inline-block; width: 19%; margin: 0; border: none;">
                <a href="{% url 'physician_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">üë®‚Äç‚öïÔ∏è</div>
                    <div>Doctors</div>
                </a>
            </li>
            <li style="display: inline-block; width: 19%; margin: 0; border: none;">
                <a href="{% url 'patient_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">üë•</div>
                    <div>Patients</div>
                </a>
            </li>
            <li style="display: inline-block; width: 19%; margin: 0; border: none;">
                <a href="{% url 'appointment_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">üìÖ</div>
                    <div>Appointments</div>
                </a>
            </li>
            <li style="display: inline-block; width: 19%; margin: 0; border: none;">
                <a href="{% url 'prescription_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid var(--hairline-color); margin: 5px;">
                    <div style="font-size: 24px; margin-bottom: 5px;">üíä</div>
                    <div>Prescriptions</div>
                </a>
            </li>
        </ul>
    </div>

    <!-- Recent Appointments -->
    <div class="module">
        <table>
            <caption><a href="{% url 'appointment_list' %}">Recent Appointments</a></caption>
            <thead>
                <tr>
                    <th>Date & Time</th>
                    <th>Patient</th>
                    <th>Physician</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for appointment in recent_appointments %}
                <tr>
                    <td>{{ appointment.encounter_date|date:"Y-m-d H:i" }}</td>
                    <td>
                        <a href="{% url 'patient_detail' appointment.patient.patient_id %}">
                            {{ appointment.patient.full_name }}
                        </a>
                    </td>
                    <td>
                        {% if appointment.provider %}
                            Dr. {{ appointment.provider.full_name }}
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                    <td>{{ appointment.encounter_type }}</td>
                    <td>
                        <span class="status-badge status-{{ appointment.status|lower|cut:' ' }}">
                            {{ appointment.status }}
                        </span>
                    </td>
                    <td>
                        <a href="{% url 'appointment_detail' appointment.encounter_id %}">View</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="text-align: center; color: #666;">
                        No recent appointments found.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
