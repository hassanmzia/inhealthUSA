{% extends 'healthcare/base.html' %}

{% block title %}Patients - InHealth EHR{% endblock %}

{% block breadcrumbs %}
&rsaquo; <a href="{% url 'patient_list' %}">Patients</a>
{% endblock %}

{% block content %}
<h1>Patients</h1>

<!-- Search -->
<div class="search-form">
    <form method="get" action="{% url 'patient_list' %}">
        <input type="text" name="search" value="{{ search }}" placeholder="Search patients by name, email, or phone...">
        <button type="submit">Search</button>
    </form>
</div>

<!-- Patient List -->
<div class="module">
    <table>
        <caption>Patient List</caption>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Date of Birth</th>
                <th>Gender</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for patient in patients %}
            <tr>
                <td>{{ patient.patient_id }}</td>
                <td>
                    <a href="{% url 'patient_detail' patient.patient_id %}">
                        {{ patient.full_name }}
                    </a>
                </td>
                <td>{{ patient.date_of_birth|date:"Y-m-d" }}</td>
                <td>{{ patient.gender }}</td>
                <td>{{ patient.phone|default:"N/A" }}</td>
                <td>{{ patient.email|default:"N/A" }}</td>
                <td>
                    <a href="{% url 'patient_detail' patient.patient_id %}">View</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" style="text-align: center; color: #666;">
                    No patients found.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<p style="margin-top: 20px; font-size: 12px; color: #666;">
    <strong>Note:</strong> To add or edit patients, please use the <a href="/admin/healthcare/patient/">Admin Panel</a>.
</p>
{% endblock %}
