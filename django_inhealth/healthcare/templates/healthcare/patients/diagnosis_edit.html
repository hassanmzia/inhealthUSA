{% extends 'healthcare/base.html' %}
{% block title %}Edit Diagnosis - InHealth EHR{% endblock %}
{% block breadcrumbs %}&rsaquo; <a href="{% url 'patient_list' %}">Patients</a> &rsaquo; <a href="{% url 'patient_detail' patient.patient_id %}">{{ patient.full_name }}</a> &rsaquo; <a href="{% url 'patient_edit' patient.patient_id %}">Edit</a> &rsaquo; Edit Diagnosis{% endblock %}
{% block content %}{% include 'healthcare/includes/form_styles.html' %}<div class="form-container"><div class="form-header"><h1>Edit Diagnosis</h1><div class="meta"><strong>Patient:</strong> {{ patient.full_name }} | <strong>Diagnosis:</strong> {{ diagnosis.diagnosis_description|truncatewords:8 }}</div></div><div class="module form-module"><h2>Diagnosis Information</h2><div class="form-content"><form method="POST">{% csrf_token %}<div class="form-row full-width"><div class="form-group"><label class="required">Description</label><textarea name="diagnosis_description" rows="2" required>{{ diagnosis.diagnosis_description }}</textarea></div></div><div class="form-row"><div class="form-group"><label>ICD-10 Code</label><input type="text" name="icd10_code" value="{{ diagnosis.icd10_code|default:'' }}"></div><div class="form-group"><label>ICD-11 Code</label><input type="text" name="icd11_code" value="{{ diagnosis.icd11_code|default:'' }}"></div></div><div class="form-row"><div class="form-group"><label class="required">Diagnosis Type</label><select name="diagnosis_type" required><option value="Primary" {% if diagnosis.diagnosis_type == 'Primary' %}selected{% endif %}>Primary Diagnosis</option><option value="Secondary" {% if diagnosis.diagnosis_type == 'Secondary' %}selected{% endif %}>Secondary Diagnosis</option><option value="Differential" {% if diagnosis.diagnosis_type == 'Differential' %}selected{% endif %}>Differential Diagnosis</option></select></div><div class="form-group"><label class="required">Status</label><select name="status" required><option value="Active" {% if diagnosis.status == 'Active' %}selected{% endif %}>Active</option><option value="Resolved" {% if diagnosis.status == 'Resolved' %}selected{% endif %}>Resolved</option><option value="Under Investigation" {% if diagnosis.status == 'Under Investigation' %}selected{% endif %}>Under Investigation</option></select></div></div><div class="form-row"><div class="form-group"><label>Onset Date</label><input type="date" name="onset_date" value="{% if diagnosis.onset_date %}{{ diagnosis.onset_date|date:'Y-m-d' }}{% endif %}"></div><div class="form-group"><label>Resolved Date</label><input type="date" name="resolved_date" value="{% if diagnosis.resolved_date %}{{ diagnosis.resolved_date|date:'Y-m-d' }}{% endif %}"></div></div><div class="form-row full-width"><div class="form-group"><label>Clinical Notes</label><textarea name="clinical_notes" rows="3">{{ diagnosis.clinical_notes|default:'' }}</textarea></div></div><div class="submit-row"><div></div><div class="buttons-right"><a href="{% url 'patient_edit' patient.patient_id %}" class="button-secondary">Cancel</a><button type="submit" class="button-primary">Update Diagnosis</button></div></div></form></div></div></div>{% endblock %}
