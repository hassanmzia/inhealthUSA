{% extends 'healthcare/base.html' %}

{% block title %}Nurse Profile - InHealth EHR{% endblock %}

{% block content %}
<div class="breadcrumbs">
    <a href="{% url 'index' %}">Home</a> &rsaquo;
    <a href="{% url 'nurse_dashboard' %}">Nurse Dashboard</a> &rsaquo;
    My Profile
</div>

<div class="module">
    <h1>Nurse Profile</h1>

    <!-- Profile Information -->
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 30px; margin: 20px 0;">
        <div class="module">
            <h2>Personal Information</h2>
            <div style="padding: 20px;">
                <div style="margin-bottom: 15px;">
                    <strong>Name:</strong><br>
                    {{ user.first_name }} {{ user.last_name }}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Username:</strong><br>
                    {{ user.username }}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Email:</strong><br>
                    {{ user.email|default:"Not provided" }}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Phone:</strong><br>
                    {{ nurse_profile.phone|default:"Not provided" }}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Date of Birth:</strong><br>
                    {{ nurse_profile.date_of_birth|date:"M d, Y"|default:"Not provided" }}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Role:</strong><br>
                    Nurse
                </div>
                <div style="margin-top: 20px;">
                    <a href="{% url 'nurse_profile_edit' %}" class="button" style="display: inline-block; padding: 10px 20px; background: #417690; color: white; text-decoration: none; border-radius: 3px;">
                        Edit Profile
                    </a>
                </div>
            </div>
        </div>

        <div>
            <!-- Today's Statistics -->
            <div class="module">
                <h2>Today's Activity</h2>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 20px;">
                    <div style="text-align: center; padding: 15px; background: #e7f3ff; border-radius: 5px;">
                        <div style="font-size: 32px; font-weight: bold; color: #417690;">{{ stats.patients_seen_today }}</div>
                        <div style="font-size: 12px; color: #666;">Patients Seen</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: #e7ffe7; border-radius: 5px;">
                        <div style="font-size: 32px; font-weight: bold; color: #4caf50;">{{ stats.vitals_recorded_today }}</div>
                        <div style="font-size: 12px; color: #666;">Vitals Recorded</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: #ffe7f3; border-radius: 5px;">
                        <div style="font-size: 32px; font-weight: bold; color: #e91e63;">{{ stats.appointments_today }}</div>
                        <div style="font-size: 12px; color: #666;">Appointments</div>
                    </div>
                </div>
            </div>

            <!-- Recent Vitals Recorded -->
            <div class="module" style="margin-top: 20px;">
                <h2>Recent Vital Signs Activity</h2>
                <table style="width: 100%; margin-top: 10px;">
                    <thead>
                        <tr>
                            <th style="text-align: left; padding: 10px; background: #f0f0f0;">Patient</th>
                            <th style="text-align: left; padding: 10px; background: #f0f0f0;">BP</th>
                            <th style="text-align: left; padding: 10px; background: #f0f0f0;">HR</th>
                            <th style="text-align: left; padding: 10px; background: #f0f0f0;">Temp</th>
                            <th style="text-align: left; padding: 10px; background: #f0f0f0;">Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for vital in recent_vitals %}
                        <tr style="border-bottom: 1px solid #e8e8e8;">
                            <td style="padding: 10px;">
                                <a href="{% url 'patient_detail' vital.encounter.patient.patient_id %}">{{ vital.encounter.patient.full_name }}</a>
                            </td>
                            <td style="padding: 10px;">
                                {% if vital.blood_pressure_systolic and vital.blood_pressure_diastolic %}
                                    {{ vital.blood_pressure_systolic }}/{{ vital.blood_pressure_diastolic }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                            <td style="padding: 10px;">{{ vital.heart_rate|default:"-" }}</td>
                            <td style="padding: 10px;">
                                {% if vital.temperature_value %}
                                    {{ vital.temperature_value }}¬∞{{ vital.temperature_unit|default:"F" }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                            <td style="padding: 10px;">{{ vital.recorded_at|date:"M d, H:i" }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" style="padding: 10px; text-align: center; color: #999;">No recent vitals</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div style="margin-top: 10px; padding: 10px;">
                    <a href="{% url 'nurse_vitals_list' %}">View All Vitals &raquo;</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Links -->
    <div class="module" style="margin-top: 20px;">
        <h2>Quick Links</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; padding: 20px;">
            <a href="{% url 'nurse_dashboard' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid #e8e8e8; border-radius: 5px; text-decoration: none;">
                <div style="font-size: 24px; margin-bottom: 5px;">üìä</div>
                <div>Dashboard</div>
            </a>
            <a href="{% url 'nurse_patients_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid #e8e8e8; border-radius: 5px; text-decoration: none;">
                <div style="font-size: 24px; margin-bottom: 5px;">üë•</div>
                <div>Patients</div>
            </a>
            <a href="{% url 'nurse_vitals_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid #e8e8e8; border-radius: 5px; text-decoration: none;">
                <div style="font-size: 24px; margin-bottom: 5px;">‚ù§Ô∏è</div>
                <div>Vital Signs</div>
            </a>
            <a href="{% url 'appointment_list' %}" style="display: block; padding: 15px; text-align: center; background: white; border: 1px solid #e8e8e8; border-radius: 5px; text-decoration: none;">
                <div style="font-size: 24px; margin-bottom: 5px;">üìÖ</div>
                <div>Appointments</div>
            </a>
        </div>
    </div>
</div>
{% endblock %}
